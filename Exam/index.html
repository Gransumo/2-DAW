<!doctype html>
<html lang="en">

    <head>
        <title>Formulario Examen</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS v5.2.1 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

        <!-- Links -->
        <link rel="stylesheet" href="style.css">
        <script type="text/JavaScript" src="botones.js"></script>
    </head>

    <body>
        <main>
            <h3><strong>Rellena el Formulario</strong></h3>
            <form onsubmit="All();" method="post">
                <!-- Campo Nombre y Apellidos -->
                <label for="name">Nombre y Apellidos:</label>
                <input type="text" id="name" name="name" autocomplete="off" onblur="validarLetras(this);" required>

                <!-- Campo Día Nacimiento -->
                <label for="day">Día de Nacimiento:</label>
                <input type="number" id="day" name="day" autocomplete="off" onblur="validarDia(this);" required>

                <!-- Campo Mes Nacimiento -->
                <label for="month">Mes de Nacimiento:</label>
                <input type="number" id="month" name="month" autocomplete="off" onblur="validarMes(this);" required>
                
                <!-- Campo Año Nacimiento -->
                <label for="year">Año de Nacimiento:</label>
                <input type="number" id="year" name="year" autocomplete="off" onblur="validarAño(this);" required>

                <!-- Botón -->
                <input type="submit" name="enviar" value="Enviar">
            </form>
            <div class="botones">
                <input type="button" name="question1" value="Realizar coseno" onclick="Coseno();">
                <input type="button" name="question2" value="Seis números" onclick="Numeros();">
                <input type="button" name="question3" value="Piedra, papel y tijeras" onclick="Juego();">
            </div>
        </main>
        <script>
            /* Validar campos */
            function validarLetras(input) {
                var regex = /^[A-Za-zñÑáéíóúÁÉÍÓÚ\s]+$/;
                var valor = input.value;

                if (!regex.test(valor)) {
                    input.value = valor.replace(/[^A-Za-zñÑáéíóúÁÉÍÓÚ\s]/g, '');}}
            
            function validarDia(input) {
                var regex = /^[0-9]+$/;
                var valor = input.value;

                if (!regex.test(valor) || valor <= 1 || valor >= 31) {
                    alert("Error: " + valor + " no es un día valido.");
                    if (valor <= 1) {
                        input.value = valor.replace(valor, '1');
                    } else if ( valor >= 31){
                        input.value = valor.replace(valor, '31');}}}

            function validarMes(input) {
                var regex = /^[0-9]+$/;
                var valor = input.value;

                if (!regex.test(valor) || valor <= 1 || valor >= 12) {
                    alert("Error: " + valor + " no es un mes valido.");
                    if (valor <= 1) {
                        input.value = valor.replace(valor, '1');
                    } else if ( valor >= 12){
                        input.value = valor.replace(valor, '12');}}}

            function validarAño(input) {
                var regex = /^[0-9]+$/;
                var valor = input.value;

                if (!regex.test(valor) || valor <= 1950 || valor >= 2023) {
                    alert("Error: " + valor + " no es un año valido.");
                    if (valor <= 1950) {
                        input.value = valor.replace(valor, '1950');
                    } else if ( valor >= 2023){
                        input.value = valor.replace(valor, '2023');}}}

            function All() {
                    var name = document.getElementById('name').value;
                    var day = document.getElementById('day').value;
                    var month = document.getElementById('month').value;
                    var year = document.getElementById('year').value;

                    goodMorning(name);
                    count(name);
                    fisrtLetter(name);
                    lastLetter(name);
                    minThree(name);
                    Up(name);
                    old(year);}

                function goodMorning(name) {
                    document.write("Buenos días " + name + "<br>");}

                /* Pregunta 1*/
                function count(name) {
                    document.write("Tu nombre tiene " + name.length + " carácteres, incluidos espacios. <br>");}

                /* Pregunta 2*/
                function fisrtLetter(name) {
                    var str = name.toUpperCase();
                    let index = str.indexOf("A");
                    let num = 1;
                    let res = index + num;
                    
                    document.write("La primera letra A de tu nombre está en la posición: " + res + ".<br>");}

                /* Pregunta 3 */
                function lastLetter(name){
                    var str = name.toUpperCase();
                    let index = str.lastIndexOf("A");
                    let num = 1;
                    let res = index + num;

                    document.write("La última letra A de tu nombre está en la posición: " + res + ".<br>");}

                /* Pregunta 4 */
                function minThree(name) {
                    document.write("Tu nombre menos las 3 primeras letras es: " + name.substr(3) + ".<br>");}

                /* Pregunta 5 */
                function Up(name) {
                    var str = name.toUpperCase();
                    document.write("Tu nombre todo en mayúsculas es: " + str + ".<br>");}

                /* Pregunta 6 */
                function old(year) {
                    let yearold = 2023 - year;
                    document.write("Tu edad es: " + yearold + " años.<br>");}
        </script>
        <!-- Bootstrap JavaScript Libraries -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
    </body>
</html>